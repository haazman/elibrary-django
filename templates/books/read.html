{% extends 'base.html' %}

{% block title %}Baca {{ book.title }} - E-Library{% endblock %}

{% block content %}
<div class="min-h-screen bg-white">
    <!-- Custom Navbar for Reading -->
    <nav class="bg-gray-100 border-b border-gray-300 px-4 py-3">
        <div class="max-w-6xl mx-auto flex items-center justify-between">
            <!-- Back Button -->
            <a href="{% url 'books:detail' book.id %}" class="flex items-center text-gray-600 hover:text-gray-900">
                <i class="fas fa-arrow-left mr-2"></i>
                &lt; Back
            </a>
            
            <!-- Page Info -->
            <div class="flex items-center space-x-4">
                <span class="text-gray-700 font-medium">
                    {{ page_number }} / {{ total_pages }}
                </span>
            </div>
            
            <!-- Navigation Controls -->
            <div class="flex items-center space-x-2">
                {% if page_number > 1 %}
                    <a href="?page={{ page_number|add:'-1' }}" class="btn-secondary">
                        Previous
                    </a>
                {% else %}
                    <button class="btn-secondary opacity-50 cursor-not-allowed" disabled>
                        Previous
                    </button>
                {% endif %}
                
                {% if page_number < total_pages %}
                    <a href="?page={{ page_number|add:'1' }}" class="btn-secondary">
                        Next
                    </a>
                {% else %}
                    <button class="btn-secondary opacity-50 cursor-not-allowed" disabled>
                        Next
                    </button>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <!-- Book Page Content -->
    <div class="max-w-4xl mx-auto p-4">
        <div class="text-center">
            <img src="{{ current_page.image.url }}" alt="Page {{ page_number }}" 
                 class="max-w-full h-auto mx-auto shadow-lg rounded-lg">
        </div>
    </div>
    
    <!-- Keyboard Navigation -->
    <script>
        document.addEventListener('keydown', function(e) {
            const currentPage = {{ page_number }};
            const totalPages = {{ total_pages }};
            
            if (e.key === 'ArrowLeft' && currentPage > 1) {
                window.location.href = '?page=' + (currentPage - 1);
            } else if (e.key === 'ArrowRight' && currentPage < totalPages) {
                window.location.href = '?page=' + (currentPage + 1);
            } else if (e.key === 'Escape') {
                window.location.href = '{% url 'books:detail' book.id %}';
            }
        });
    </script>
</div>
{% endblock %}
